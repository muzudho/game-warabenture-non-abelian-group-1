<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>非可換な群 (MIT ライセンス / 改造・再配布許可)</title>
	<script>
		var scene = "title-0";
		var intervalFrame = 0;
		
		/** ゲームの時計を開始。 */
		function start_timer() {
			setInterval(
				() => {
					switch (scene) {
						case "title-0":
							document.getElementById("title").style.visibility = "visible";
							scene = "title-1";
							break;
							
						case "title-1":
							let left = document.getElementById("title").style.left;
							// 末尾の px を外す。
							left = left.substring(0, left.length - 2);
							if (0 < left) {
								// alert("left = " + left);
								left -= 20;
								document.getElementById("title").style.left = left + "px";
							} else {
								scene = "title-window-0";
								intervalFrame = 30;
							}
							break;

						case "title-window-0":
							if (0 < intervalFrame) {
								intervalFrame -= 1;
							} else {
								scene = "title-window-1";
							}
							break;

						case "title-window-1":
							document.getElementById("title-scene").style.visibility = "visible";
							scene = "finished";
							break;

						case "start-game":
							document.getElementById("title").style.visibility = "hidden";
							document.getElementById("title-scene").style.visibility = "hidden";
							document.getElementById("development-scene").style.visibility = "visible";
							scene = "finished";
							break;
					}
				},
				16
			);
		}

		/** ゲーム画面の初期化。 */
		function init() {
			document.getElementById("title").style.left = "1920px";
			document.getElementById("title").style.visibility = "hidden";
			document.getElementById("title-scene").style.visibility = "hidden";
			document.getElementById("development-scene").style.visibility = "hidden";
		}
		
		/** ゲームを開始します。 */
		function start_game() {
			scene = "start-game";
		}
		
		/** ゲームを終了します。 */
		function finish_game() {
			init();
			scene = "title-0";
		}

		/** 4箇所を１つずらします。 */
		function shift4(a, b, c, d) {
			// 展開図
			var temp = document.getElementById("tile-" + d).src;
			document.getElementById("tile-" + d).src = document.getElementById("tile-" + c).src;
			document.getElementById("tile-" + c).src = document.getElementById("tile-" + b).src;
			document.getElementById("tile-" + b).src = document.getElementById("tile-" + a).src;
			document.getElementById("tile-" + a).src = temp;
			
			// 立体図
			var temp = document.getElementById("dia-" + d).src;
			document.getElementById("dia-" + d).src = document.getElementById("dia-" + c).src;
			document.getElementById("dia-" + c).src = document.getElementById("dia-" + b).src;
			document.getElementById("dia-" + b).src = document.getElementById("dia-" + a).src;
			document.getElementById("dia-" + a).src = temp;
			
			// ひしがた画像の調整
			document.getElementById("dia-0").src = document.getElementById("dia-0").src.replace(/diamond-[ab]/, "diamond-c");
			document.getElementById("dia-1").src = document.getElementById("dia-1").src.replace(/diamond-[ab]/, "diamond-c");
			document.getElementById("dia-2").src = document.getElementById("dia-2").src.replace(/diamond-[ab]/, "diamond-c");
			document.getElementById("dia-3").src = document.getElementById("dia-3").src.replace(/diamond-[ab]/, "diamond-c");
			document.getElementById("dia-4").src = document.getElementById("dia-4").src.replace(/diamond-[ac]/, "diamond-b");
			document.getElementById("dia-5").src = document.getElementById("dia-5").src.replace(/diamond-[ac]/, "diamond-b");
			document.getElementById("dia-6").src = document.getElementById("dia-6").src.replace(/diamond-[ac]/, "diamond-b");
			document.getElementById("dia-7").src = document.getElementById("dia-7").src.replace(/diamond-[ac]/, "diamond-b");
			document.getElementById("dia-8").src = document.getElementById("dia-8").src.replace(/diamond-[bc]/, "diamond-a");
			document.getElementById("dia-9").src = document.getElementById("dia-9").src.replace(/diamond-[bc]/, "diamond-a");
			document.getElementById("dia-10").src = document.getElementById("dia-10").src.replace(/diamond-[bc]/, "diamond-a");
			document.getElementById("dia-11").src = document.getElementById("dia-11").src.replace(/diamond-[bc]/, "diamond-a");
			document.getElementById("dia-12").src = document.getElementById("dia-12").src.replace(/diamond-[ab]/, "diamond-c");
			document.getElementById("dia-13").src = document.getElementById("dia-13").src.replace(/diamond-[ab]/, "diamond-c");
			document.getElementById("dia-14").src = document.getElementById("dia-14").src.replace(/diamond-[ab]/, "diamond-c");
			document.getElementById("dia-15").src = document.getElementById("dia-15").src.replace(/diamond-[ab]/, "diamond-c");
			document.getElementById("dia-16").src = document.getElementById("dia-16").src.replace(/diamond-[bc]/, "diamond-a");
			document.getElementById("dia-17").src = document.getElementById("dia-17").src.replace(/diamond-[bc]/, "diamond-a");
			document.getElementById("dia-18").src = document.getElementById("dia-18").src.replace(/diamond-[bc]/, "diamond-a");
			document.getElementById("dia-19").src = document.getElementById("dia-19").src.replace(/diamond-[bc]/, "diamond-a");
			document.getElementById("dia-20").src = document.getElementById("dia-20").src.replace(/diamond-[ac]/, "diamond-b");
			document.getElementById("dia-21").src = document.getElementById("dia-21").src.replace(/diamond-[ac]/, "diamond-b");
			document.getElementById("dia-22").src = document.getElementById("dia-22").src.replace(/diamond-[ac]/, "diamond-b");
			document.getElementById("dia-23").src = document.getElementById("dia-23").src.replace(/diamond-[ac]/, "diamond-b");
		}
		
		/**
			キューブをひねります。
			  11 0
			10	   1
			9	    2
			8		3
			 7     4
			   6 5
		 */
		function rotate(number) {
			switch(number)
			{
				case 0:
					shift4(8, 0, 19, 20);
					shift4(10, 2, 17, 22);
					shift4(5, 4, 6, 7);
					break;
				case 1:
					shift4(9, 1, 18, 21);
					shift4(11, 3, 16, 23);
					shift4(12, 13, 15, 14);
					break;
				case 2:
					shift4(12, 2, 7, 21);
					shift4(14, 3, 5, 20);
					shift4(9, 8, 10, 11);
					break;
				case 3:
					shift4(13, 0, 6, 23);
					shift4(15, 1, 4, 22);
					shift4(16, 17, 19, 18);
					break;
				case 4:
					shift4(9, 13, 17, 5);
					shift4(8, 12, 16, 4);
					shift4(3, 1, 0, 2);
					break;
				case 5:
					shift4(11, 15, 19, 7);
					shift4(10, 14, 18, 6);
					shift4(21, 23, 22, 20);
					break;
				case 6:
					shift4(21, 18, 1, 9);
					shift4(23, 16, 3, 11);
					shift4(14, 15, 13, 12);
					break;
				case 7:
					shift4(20, 19, 0, 8);
					shift4(22, 17, 2, 10);
					shift4(7, 6, 4, 5);
					break;
				case 8:
					shift4(23, 6, 0, 13);
					shift4(22, 4, 1, 15);
					shift4(18, 19, 17, 16);
					break;
				case 9:
					shift4(21, 7, 2, 12);
					shift4(20, 5, 3, 14);
					shift4(11, 10, 8, 9);
					break;
				case 10:
					shift4(7, 19, 15, 11);
					shift4(6, 18, 14, 10);
					shift4(20, 22, 23, 21);
					break;
				case 11:
					shift4(5, 17, 13, 9);
					shift4(4, 16, 12, 8);
					shift4(2, 0, 1, 3);
					break;
			}			
		}
		
		/** ランダムな回数、ランダムにキューブをねじります。 */
		function shuffule()
		{
			// 0~100
			var count = Math.round( Math.random()*100 );
			count += 50;
			
			for(i=0; i<count; i++)
			{
				// 0~11
				var handle = Math.round( Math.random()*11 );
				rotate(handle);
			}
		}
		
		
	</script>
</head>
<body style="background-color:white;" onload="init(); start_timer();">

	<div style="position:absolute; top:0px; left:0px; width:1920px; height:1080px; background-color:#eeeeff;">
		<img id="title" src="./img/title.png" style="visibility:hidden; position:absolute; top:0px;" />
		<div id="title-scene" style="visibility:hidden; position:absolute; top:0px; left:0px; width:100%; height:100%; background-image:url('./img/window1.png');">
			<a href="javascript: void(0);" style="position:absolute; top:570px; left:560px; font-size:64px;" onclick="start_game();">はじめる</a>
			<a href="javascript: finish_game();" style="position:absolute; top:670px; left:560px; font-size:64px;">おわる</a>
		</div>
		<div id="development-scene" style="visibility:hidden; position:absolute; top:0px; left:0px; width:100%; height:100%; background-image:url('./img/development.png');">
			<!--
				フロント
				     8
				10       9
				    11
				   
				20       12
				   21 14
				22       13
				   23 15
			-->
			<img id="dia-8" src="./img/diamond-a-pink.png" style="position:absolute; left:160px; top:128px; width:128px; height:64px;" />
			<img id="dia-9" src="./img/diamond-a-pink.png" style="position:absolute; left:256px; top:176px; width:128px; height:64px;" />
			<img id="dia-10" src="./img/diamond-a-pink.png" style="position:absolute; left: 64px; top:176px; width:128px; height:64px;" />
			<img id="dia-11" src="./img/diamond-a-pink.png" style="position:absolute; left:160px; top:224px; width:128px; height:64px;" />

			<img id="dia-20" src="./img/diamond-b-yellow-green.png" style="position:absolute; left: 64px; top:240px; width:64px; height:96px;" />
			<img id="dia-21" src="./img/diamond-b-yellow-green.png" style="position:absolute; left:160px; top:288px; width:64px; height:96px;" />
			<img id="dia-22" src="./img/diamond-b-yellow-green.png" style="position:absolute; left: 64px; top:336px; width:64px; height:96px;" />
			<img id="dia-23" src="./img/diamond-b-yellow-green.png" style="position:absolute; left:160px; top:384px; width:64px; height:96px;" />

			<img id="dia-14" src="./img/diamond-c-sky-blue.png" style="position:absolute; left:224px; top:288px; width:64px; height:96px;" />
			<img id="dia-12" src="./img/diamond-c-sky-blue.png" style="position:absolute; left:320px; top:240px; width:64px; height:96px;" />
			<img id="dia-15" src="./img/diamond-c-sky-blue.png" style="position:absolute; left:224px; top:384px; width:64px; height:96px;" />
			<img id="dia-13" src="./img/diamond-c-sky-blue.png" style="position:absolute; left:320px; top:336px; width:64px; height:96px;" />
			
			<!--
				バック
				   2  5
				 3       7
				   0  4
				 1       6
				
				    17
				16      19
				    18
			-->
			<img id="dia-3" src="./img/diamond-c-orange.png" style="position:absolute; left: 64px; top:688px; width:64px; height:96px;" />
			<img id="dia-2" src="./img/diamond-c-orange.png" style="position:absolute; left:160px; top:640px; width:64px; height:96px;" />
			<img id="dia-1" src="./img/diamond-c-orange.png" style="position:absolute; left: 64px; top:784px; width:64px; height:96px;" />
			<img id="dia-0" src="./img/diamond-c-orange.png" style="position:absolute; left:160px; top:736px; width:64px; height:96px;" />

			<img id="dia-5" src="./img/diamond-b-violet.png" style="position:absolute; left:224px; top:640px; width:64px; height:96px;" />
			<img id="dia-7" src="./img/diamond-b-violet.png" style="position:absolute; left:320px; top:688px; width:64px; height:96px;" />
			<img id="dia-4" src="./img/diamond-b-violet.png" style="position:absolute; left:224px; top:736px; width:64px; height:96px;" />
			<img id="dia-6" src="./img/diamond-b-violet.png" style="position:absolute; left:320px; top:784px; width:64px; height:96px;" />

			<img id="dia-17" src="./img/diamond-a-gray.png" style="position:absolute; left:160px; top:832px; width:128px; height:64px;" />
			<img id="dia-19" src="./img/diamond-a-gray.png" style="position:absolute; left:256px; top:880px; width:128px; height:64px;" />
			<img id="dia-16" src="./img/diamond-a-gray.png" style="position:absolute; left: 64px; top:880px; width:128px; height:64px;" />
			<img id="dia-18" src="./img/diamond-a-gray.png" style="position:absolute; left:160px; top:928px; width:128px; height:64px;" />
			
			<!--
				展開図
				       0  1
				       2  3
				 4  5  8  9 12 13 16 17
				 6  7 10 11 14 15 18 19
				      20 21
					  22 23
			-->
			<img id="tile-0" src="./img/tile-orange.png" style="position:absolute; left:768px; top:64px; width:96px; height:96px;" />
			<img id="tile-1" src="./img/tile-orange.png" style="position:absolute; left:896px; top:64px; width:96px; height:96px;" />
			<img id="tile-2" src="./img/tile-orange.png" style="position:absolute; left:768px; top:192px; width:96px; height:96px;" />
			<img id="tile-3" src="./img/tile-orange.png" style="position:absolute; left:896px; top:192px; width:96px; height:96px;" />

			<img id="tile-4" src="./img/tile-violet.png" style="position:absolute; left:512px; top:320px; width:96px; height:96px;" />
			<img id="tile-5" src="./img/tile-violet.png" style="position:absolute; left:640px; top:320px; width:96px; height:96px;" />
			<img id="tile-6" src="./img/tile-violet.png" style="position:absolute; left:512px; top:448px; width:96px; height:96px;" />
			<img id="tile-7" src="./img/tile-violet.png" style="position:absolute; left:640px; top:448px; width:96px; height:96px;" />

			<img id="tile-8" src="./img/tile-pink.png" style="position:absolute; left:768px; top:320px; width:96px; height:96px;" />
			<img id="tile-9" src="./img/tile-pink.png" style="position:absolute; left:896px; top:320px; width:96px; height:96px;" />
			<img id="tile-10" src="./img/tile-pink.png" style="position:absolute; left:768px; top:448px; width:96px; height:96px;" />
			<img id="tile-11" src="./img/tile-pink.png" style="position:absolute; left:896px; top:448px; width:96px; height:96px;" />

			<img id="tile-12" src="./img/tile-sky-blue.png" style="position:absolute; left:1024px; top:320px; width:96px; height:96px;" />
			<img id="tile-13" src="./img/tile-sky-blue.png" style="position:absolute; left:1152px; top:320px; width:96px; height:96px;" />
			<img id="tile-14" src="./img/tile-sky-blue.png" style="position:absolute; left:1024px; top:448px; width:96px; height:96px;" />
			<img id="tile-15" src="./img/tile-sky-blue.png" style="position:absolute; left:1152px; top:448px; width:96px; height:96px;" />

			<img id="tile-16" src="./img/tile-gray.png" style="position:absolute; left:1280px; top:320px; width:96px; height:96px;" />
			<img id="tile-17" src="./img/tile-gray.png" style="position:absolute; left:1408px; top:320px; width:96px; height:96px;" />
			<img id="tile-18" src="./img/tile-gray.png" style="position:absolute; left:1280px; top:448px; width:96px; height:96px;" />
			<img id="tile-19" src="./img/tile-gray.png" style="position:absolute; left:1408px; top:448px; width:96px; height:96px;" />
			
			<img id="tile-20" src="./img/tile-yellow-green.png" style="position:absolute; left:768px; top:576px; width:96px; height:96px;" />
			<img id="tile-21" src="./img/tile-yellow-green.png" style="position:absolute; left:896px; top:576px; width:96px; height:96px;" />
			<img id="tile-22" src="./img/tile-yellow-green.png" style="position:absolute; left:768px; top:704px; width:96px; height:96px;" />
			<img id="tile-23" src="./img/tile-yellow-green.png" style="position:absolute; left:896px; top:704px; width:96px; height:96px;" />

			<!-- ボタン。 -->
			<a href="javascript: shuffule();" style="position:absolute; left:448px; top:32px; font-size:20px;">Shuffule</a>

			<!-- 回転ボタン。 -->
			<a href="javascript: rotate(0);" style="position:absolute; left:288px; top:96px; font-size:20px;">Rotate</a>
			<a href="javascript: rotate(1);" style="position:absolute; left:384px; top:160px; font-size:20px;">Rotate</a>
			<a href="javascript: rotate(2);" style="position:absolute; left:384px; top:256px; font-size:20px;">Rotate</a>
			<a href="javascript: rotate(3);" style="position:absolute; left:384px; top:352px; font-size:20px;">Rotate</a>
			<a href="javascript: rotate(4);" style="position:absolute; left:320px; top:448px; font-size:20px;">Rotate</a>
			<a href="javascript: rotate(5);" style="position:absolute; left:224px; top:480px; font-size:20px;">Rotate</a>
			<a href="javascript: rotate(6);" style="position:absolute; left:160px; top:480px; font-size:20px;">Rotate</a>
			<a href="javascript: rotate(7);" style="position:absolute; left:64px; top:448px; font-size:20px;">Rotate</a>
			<a href="javascript: rotate(8);" style="position:absolute; left:0px; top:352px; font-size:20px;">Rotate</a>
			<a href="javascript: rotate(9);" style="position:absolute; left:0px; top:256px; font-size:20px;">Rotate</a>
			<a href="javascript: rotate(10);" style="position:absolute; left:0px; top:160px; font-size:20px;">Rotate</a>
			<a href="javascript: rotate(11);" style="position:absolute; left:96px; top:96px; font-size:20px;">Rotate</a>
		</div>
	</div>

	<!-- 裏を隠す板。 -->
	<div style="position:absolute; top:0px; left:1920px; width:1920px; height:1080px; background-color:white;">
	</div>
	
</body>
</html>
